# ๐ง Batch Continue Fix - October 28, 2025

## ๐ ุงููุดููุฉ

ุนูุฏ ูุนุงูุฌุฉ ูุฌููุนุฉ ูุชุจ ูู `books.txt`ุ ุฅุฐุง ูุดูุช ูุฑุญูุฉ **Transcribe** ููุชุงุจ ูุนูู (ุฌููุน ุงููุญุงููุงุช)ุ ูุงู ุงูุจุงูุจ ูุงูู ูุชููู ุชูุงููุง ููุง ูุชุงุจุน ูุจุงูู ุงููุชุจ.

## โ ุงูุญู ุงููุทุจู

ุชู ุชุนุฏูู ุงููุธุงู ููุณุชูุฑ ุชููุงุฆููุง ูููุชุงุจ ุงูุชุงูู ุนูุฏ ูุดู ุฃู ูุชุงุจ.

### ุงูุชุบููุฑุงุช:

#### 1๏ธโฃ `run_pipeline.py` (ุงูุณุทุฑ ~1193)
**ูุจู:**
```python
if not transcript_path:
    console.print("[red]All candidates failed transcription. Exiting.[/red]")
    raise typer.Exit(code=2)  # โ ุชููู ููุฑู
```

**ุจุนุฏ:**
```python
if not transcript_path:
    error_msg = "โ CRITICAL: All candidates failed transcription"
    console.print(f"[red]{error_msg}[/red]")
    summary["stages"].append({
        "name": "transcribe",
        "status": "failed",
        "error": "All candidates failed transcription"
    })
    _save_summary(d["root"], summary)  # ุญูุธ ุงููุดู
    raise RuntimeError(error_msg)  # โ ูุณูุญ ูู batch ุจุงูุชุนุงูู ูุงููุชุงุจุนุฉ
```

#### 2๏ธโฃ `run_batch.py` (ุงูุณุทูุฑ ~455-520)

**ุงูุชุญุณููุงุช:**
- **ูุถุน Auto-Continue**: ูุชุฎุทู ุงููุชุงุจ ุงููุงุดู ููุชุงุจุน ุชููุงุฆููุง
- **ุงููุถุน ุงููุฏูู**: ูุณุฃู ุงููุณุชุฎุฏู (ูุชุงุจุนุฉุ y/n)
- **ุญูุธ ุงูุชูุงุฑูุฑ**: ุงููุชุจ ุงููุงุดูุฉ ุชูุณุฌู ูู `results["failed"]`

**ุงูููุฏ ุงูุฌุฏูุฏ:**
```python
if result.returncode != 0:
    results["failed"].append({...})
    
    if _BATCH_AUTO_CONTINUE:
        # ูุถุน ุชููุงุฆู: ุชุฎุทู ูุงููุชุงุจุนุฉ
        console.print("[yellow]โ๏ธ  Auto-continue mode: Skipping failed book[/yellow]")
        continue  # โ ูุชุงุจุน ูููุชุงุจ ุงูุชุงูู โ
    else:
        # ูุถุน ูุฏูู: ุณุคุงู ุงููุณุชุฎุฏู
        choice = input("Continue to next book? (y/n): ")
        if choice == 'y':
            continue  # โ ูุชุงุจุน
        else:
            break  # โ ูุชููู
```

## ๐ฏ ุงูุงุณุชุฎุฏุงู

### ุงููุถุน ุงูุชููุงุฆู (ููุตู ุจู):
```bash
python main.py
# ุงุฎุชุฑ Option 2 (Batch Processing)
# ุฃู:
python -m src.presentation.cli.run_batch --auto-continue
```

### ุงููุถุน ุงููุฏูู:
```bash
python main.py  # Option 2
# ุนูุฏ ูุดู ูุชุงุจุ ุณููุณุฃู: "Continue to next book? (y/n)"
```

## ๐ ุณููู ุงููุธุงู ุงูุฌุฏูุฏ

| **ุงูุญุงูุฉ** | **ุงูุณููู ุงูุณุงุจู** | **ุงูุณููู ุงูุฌุฏูุฏ** |
|------------|-------------------|-------------------|
| ูุดู Transcribe (ูุชุงุจ 1) | ๐ ุชููู ูุงูู | โ๏ธ ุชุณุฌูู ูุดู + ุงููุชุงุจุนุฉ ูููุชุงุจ 2 |
| ูุดู Process (ูุชุงุจ 3) | ๐ ุชููู ูุงูู | โ๏ธ ุชุณุฌูู ูุดู + ุงููุชุงุจุนุฉ ูููุชุงุจ 4 |
| ูุฌุงุญ (ูุชุงุจ 5) | โ ุฅููุงู | โ ุฅููุงู |
| ุฅููุงุก ุงูู Batch | ุงูุชูุฑูุฑ ูุดูู ููุท ุงููุงุฌุญ | ๐ ุชูุฑูุฑ ุดุงูู (ูุฌุญ/ูุดู/ุชุฎุทู) |

## ๐ ุงูููุงุฆุฏ

1. โ **ูุง ุชููู ุชุงู**: ุงููุชุจ ุงููุงุดูุฉ ูุง ุชููู ุงููุนุงูุฌุฉ
2. ๐ **ุชูุงุฑูุฑ ุฏูููุฉ**: ูู ูุชุงุจ ููุณุฌู (ูุฌุญ/ูุดู/ุณุจุจ ุงููุดู)
3. โก **ููุงุกุฉ**: ูุนุงูุฌุฉ 20 ูุชุงุจ ูุง ุชุชููู ุนูุฏ ุงููุชุงุจ ุงูุซุงูุซ
4. ๐ **ุณูููุฉ ุงูุฅุนุงุฏุฉ**: ุฃุนุฏ ุชุดุบูู ุงูู Batch - ุณูุชุฎุทู ุงููุงุฌุญ ููุนูุฏ ุงููุงุดู

## ๐ ูุซุงู ุนููู

**books.txt:**
```
ูุชุงุจ ุงูุฃูู
ูุชุงุจ ุงูุซุงูู (ูุงุดู - ููุฏูู ุบูุฑ ููุฌูุฏ)
ูุชุงุจ ุงูุซุงูุซ
ูุชุงุจ ุงูุฑุงุจุน
```

**ุงููุชูุฌุฉ:**
```
โ ูุชุงุจ ุงูุฃูู: ูุฌุญ
โ ูุชุงุจ ุงูุซุงูู: ูุดู (All candidates failed transcription)
   โ๏ธ  Auto-continue: Moving to next book...
โ ูุชุงุจ ุงูุซุงูุซ: ูุฌุญ
โ ูุชุงุจ ุงูุฑุงุจุน: ูุฌุญ

๐ Final Summary:
   Total: 4
   Success: 3
   Failed: 1
```

## ๐ ุงูุชุญูู

ูุงุฎุชุจุงุฑ ุงูุชุนุฏููุงุช:
```bash
# ุฃูุดุฆ books.txt ุจูุชุจ ุชุฌุฑูุจูุฉ (ุถุน ูุชุงุจ ูููู ูููุดู)
echo ูุชุงุจ ุชุฌุฑูุจู ุตุญูุญ > books.txt
echo ูุชุงุจ ูููู ุบูุฑ ููุฌูุฏ 12345 >> books.txt
echo ูุชุงุจ ุชุฌุฑูุจู ุตุญูุญ 2 >> books.txt

# ุดุบู Batch
python main.py  # Option 2

# ุฑุงูุจ ุงูุณููู - ูุฌุจ ุฃู ูุชุฎุทู ุงููุชุงุจ ุงููููู ููุชุงุจุน
```

---

**ุชุงุฑูุฎ ุงูุชุทุจูู**: 28 ุฃูุชูุจุฑ 2025  
**ุงูุฅุตุฏุงุฑ**: v2.3.0 (Batch Continue Fix)  
**ุงููููุงุช ุงููุนุฏูุฉ**:
- `src/presentation/cli/run_pipeline.py`
- `src/presentation/cli/run_batch.py`
