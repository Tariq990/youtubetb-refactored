# ุญู ูุดููุฉ Transcription Failures - YouTube IP Block

## ๐จ ุงููุดููุฉ
```
ERROR: Sign in to confirm you're not a bot
YouTube is blocking requests from your IP
```

---

## โ ุงูุญููู (ุจุงูุชุฑุชูุจ)

### 1๏ธโฃ **ุชุญุฏูุซ yt-dlp (ุงูุฃูู!)**
```cmd
pip install --upgrade yt-dlp
```

**ุงูุณุจุจ**: yt-dlp ูุญุชุงุฌ ุชุญุฏูุซ ุดูุฑู ูุฃู YouTube ูุบููุฑ ุขููุฉ ุงูุญูุงูุฉ ุจุงุณุชูุฑุงุฑ.

**ุงูุชุญูู ูู ุงููุณุฎุฉ**:
```cmd
yt-dlp --version
```
- โ ูุฌุจ ุฃู ุชููู `2024.10.22` ุฃู ุฃุญุฏุซ
- โ ุฅุฐุง ูุงูุช `2024.08.xx` ุฃู ุฃูุฏู โ ุญุฏูุซ ููุฑุงู

---

### 2๏ธโฃ **ุชุญุฏูุซ ุงูู Cookies (ููู ุฌุฏุงู!)**

**ุงููุดููุฉ**: cookies.txt ุงูุชูุช ุตูุงุญูุชูุง ุจุนุฏ ุงุณุชุฎุฏุงู ููุซู

**ุงูุญู**:
1. ุงูุชุญ YouTube ูู ูุชุตูุญ **Chrome** ุฃู **Edge**
2. ุณุฌูู ุฏุฎูู ูุญุณุงุจู
3. ุงุณุชุฎุฏู Extension ูุงุณุชุฎุฑุงุฌ Cookies:
   - [Get cookies.txt LOCALLY](https://chrome.google.com/webstore/detail/get-cookiestxt-locally/cclelndahbckbenkjhflpdbgdldlbecc)
   - ุฃู [cookies.txt](https://chrome.google.com/webstore/detail/cookiestxt/njabckikapfpffapmjgojcnbfjonfjfg)

4. ุญููู ููู `cookies.txt` ุฌุฏูุฏ ูุงุณุชุจุฏู ุงููุฏูู:
   ```
   secrets/cookies.txt
   secrets/cookies_1.txt
   secrets/cookies_2.txt
   secrets/cookies_3.txt
   ```

**ูุตูุญุฉ**: ุญุฏูุซ ุงูู 4 ูููุงุช ูููู ุจููุณ ุงูู cookies ุงูุฌุฏูุฏ.

---

### 3๏ธโฃ **ุงุณุชุฎุฏู Proxies (ููุญุงูุงุช ุงูุตุนุจุฉ)**

ุฅุฐุง ูุง ููุนุช ุงูุญููู ุงูุณุงุจูุฉ โ ุงุณุชุฎุฏู Proxy ูุชุบููุฑ ุงูู IP.

**ุชุนุฏูู `transcribe.py`**:
```python
# ูู ุฏุงูุฉ run_yt_dlp_download_subs()ุ ุฃุถู:
cmd = [
    "yt-dlp",
    "--proxy", "socks5://127.0.0.1:1080",  # ุฃู HTTP proxy
    "--cookies", str(cookie_path),
    # ... ุจููุฉ ุงูุฃูุงูุฑ
]
```

**Proxy ูุฌุงูู ููุชุฌุฑุจุฉ**:
- ุงุณุชุฎุฏู VPN ุนูู ุฌูุงุฒู (ProtonVPN ูุฌุงูู)
- ุฃู ุงุณุชุฎุฏู SOCKS5 proxy ูู https://www.proxy-list.download/SOCKS5

---

### 4๏ธโฃ **ุฅุถุงูุฉ Delay ุจูู ุงููุชุจ (ุชุฌูุจ IP Block)**

**ุชุนุฏูู `run_batch.py`**:
```python
# ูู ููุงูุฉ process_books_batch()ุ ุฒูุฏ ุงูู delay:
if idx < total_books:
    print("\nโณ Waiting 30 seconds before next book...")
    time.sleep(30)  # ุจุฏู 5 โ 30 ุซุงููุฉ
```

**ุงููุงุฆุฏุฉ**: YouTube ูุง ูุดู ุฅูู bot ููุง ุชุจุทุฆ ุงูุทูุจุงุช.

---

### 5๏ธโฃ **ุงุณุชุฎุฏุงู YouTube Transcript API ูุน Cookies (ุฎูุงุฑ ุจุฏูู)**

**ุงููุดููุฉ ุงูุญุงููุฉ**: `youtube-transcript-api` ูุง ุชุณุชุฎุฏู cookies ุจุงูููุฏ ุงูุญุงูู.

**ุงูุญู ุงููุคูุช**: 
- ุงุณุชุฎุฏู VPN ูุบููุฑ ุงูู IP
- ุฃู ุงูุชุธุฑ 1-2 ุณุงุนุฉ ูุญุฏ ูุง YouTube ูุฑูุน ุงูุญุธุฑ

---

## ๐ง ุงูุฅุฌุฑุงุก ุงูููุตู ุจู (ุฎุทูุฉ ุจุฎุทูุฉ)

### ุงููุฑุญูุฉ ุงูุฃููู: ุงูุชุญุฏูุซ ุงูููุฑู
```cmd
REM 1. ุญุฏูุซ yt-dlp
pip install --upgrade yt-dlp

REM 2. ุชุญูู ูู ุงููุณุฎุฉ
yt-dlp --version

REM 3. ุญุฏูุซ ุงูู cookies (ูุฏููุงู ูู Chrome)
```

### ุงููุฑุญูุฉ ุงูุซุงููุฉ: ุงุฎุชุจุงุฑ ุงูุญู
```cmd
REM ุฌุฑูุจ ููุณ ุงูููุฏูู ุงููุนุทูู:
python -m src.infrastructure.adapters.transcribe --url "https://www.youtube.com/watch?v=tj5J6uDIH3s"
```

**ุงููุชูุฌุฉ ุงููุชููุนุฉ**:
- โ ุฅุฐุง ุงุดุชุบู โ ุงููุดููุฉ ูุญูููุฉ!
- โ ุฅุฐุง ูุง ุงุดุชุบู โ ุฑูุญ ููุฎุทูุฉ 3 (Proxy)

### ุงููุฑุญูุฉ ุงูุซุงูุซุฉ: ุงุณุชุฑุงุชูุฌูุฉ ุทูููุฉ ุงููุฏู
1. **ุฒูุฏ ุงูู delay** ุจูู ุงููุชุจ (30 ุซุงููุฉ ุจุฏู 5)
2. **ุงุณุชุฎุฏู VPN** ูู ุชุนุงูุฌ ุฃูุซุฑ ูู 10 ูุชุจ ุจุงูููู
3. **ุญุฏูุซ cookies** ูู ุฃุณุจูุน

---

## ๐ ูุชู ุชุณุชุฎุฏู ูู ุญูุ

| ุงูุญุงูุฉ | ุงูุญู |
|--------|------|
| **ุฃูู ูุฑุฉ ุชุดูู ุงูุฎุทุฃ** | ุญุฏูุซ yt-dlp + ุญุฏูุซ cookies |
| **ุงูุฎุทุฃ ูุชูุฑุฑ ุจุงุณุชูุฑุงุฑ** | ุงุณุชุฎุฏู Proxy + ุฒูุฏ ุงูู delay |
| **ุนุงูุฌ 20+ ูุชุงุจ ุจููุณ ุงูููู** | ุญุชูู ุชุณุชุฎุฏู VPN |
| **ูู ุงูุญููู ูุดูุช** | ุงูุชุธุฑ ุณุงุนุชูู (YouTube ุชุฑูุน ุงูุญุธุฑ ุชููุงุฆูุงู) |

---

## ๐งช ุงุฎุชุจุงุฑ ุดุงูู

```cmd
REM ุงุฎุชุจุงุฑ 1: ุชุญูู ูู yt-dlp
yt-dlp --version

REM ุงุฎุชุจุงุฑ 2: ุชุญูู ูู cookies
dir secrets\cookies.txt

REM ุงุฎุชุจุงุฑ 3: ุฌุฑูุจ ููุฏูู ุจุณูุท
yt-dlp --cookies secrets\cookies.txt --list-subs "https://www.youtube.com/watch?v=dQw4w9WgXcQ"

REM ุงุฎุชุจุงุฑ 4: ุดูู ุงูู User-Agent ุงููุณุชุฎุฏู
python cookies_helper.py
REM โ Option 1 (View User-Agents)
```

---

## ๐ฏ ุงูุญู ุงูุฃูุซู (ููุงุณุชุฎุฏุงู ุงููููู)

```python
# ุฃุถู ูุฐุง ูู run_batch.py (ุณุทุฑ 785):
if idx < total_books:
    # Dynamic delay based on success rate
    if results["failed"]:
        delay = 60  # ุฅุฐุง ูู ูุดู โ ุฒูุฏ ุงูุงูุชุธุงุฑ
    else:
        delay = 20  # Normal delay
    
    print(f"\nโณ Waiting {delay} seconds before next book...")
    time.sleep(delay)
```

---

## โ๏ธ ุชุญุฐูุฑุงุช ูููุฉ

1. **ูุง ุชุณุชุฎุฏู** ุญุณุงุจ YouTube ุงูุฑุฆูุณู ููู cookies (ุงุณุชุฎุฏู ุญุณุงุจ ุจุฏูู)
2. **ูุง ุชุนุงูุฌ** ุฃูุซุฑ ูู 15 ูุชุงุจ ุจุฏูู VPN
3. **ุญุฏูุซ yt-dlp** ูู ุดูุฑ (YouTube ุชุบููุฑ ุงูุญูุงูุฉ ุจุงุณุชูุฑุงุฑ)
4. **ูุง ุชููู** ุงูู delay ุนู 10 ุซูุงูู ุจูู ุงููุชุจ

---

## ๐ ุงูุฏุนู

ุฅุฐุง ุฌุฑุจุช ูู ุงูุญููู ููุง ุฒุงู ุงูุฎุทุฃ ููุฌูุฏ:
1. ุงูุชุธุฑ 2-3 ุณุงุนุงุช (ุงูุญุธุฑ ูุคูุช)
2. ุบููุฑ ุงูู IP (ุฃุนุฏ ุชุดุบูู ุงูุฑุงูุชุฑ ุฃู ุงุณุชุฎุฏู VPN)
3. ุงุณุชุฎุฏู ุฌูุงุฒ ุซุงูู ููุชุฌุฑุจุฉ
