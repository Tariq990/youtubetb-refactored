# Fix: YouTube Data API Quota Exceeded

## ๐จ ุงููุดููุฉ
```
โ๏ธ YouTube Data API: Quota exceeded - Wait or use another key
```

## ๐ ุงูุณุจุจ
- YouTube Data API ูุฏูู **ุญุฏ ูููู**: 10,000 quota units
- ูู ุจุญุซ = ~100 units
- ุจุนุฏ ~100 ุจุญุซ/ูููุ ููุชูู ุงูู quota
- ูุชู ุฅุนุงุฏุฉ ุถุจุทู ูู **ููุชุตู ุงูููู ุจุชูููุช ุงููุญูุท ุงููุงุฏุฆ (PST)**

---

## โ ุงูุญููู

### ุงูุญู 1: ุงูุชุธุฑ 24 ุณุงุนุฉ (ูุฌุงูู)
- ุงูู quota ูุชุฌุฏุฏ ุชููุงุฆูุงู ูู ููู
- ูุง ุญุงุฌุฉ ูุฃู ุฅุฌุฑุงุก
- **ุงูููุช**: 24 ุณุงุนุฉ max

### ุงูุญู 2: ุงุณุชุฎุฏู YouTube API key ุขุฎุฑ (ููุตู ุจู) โญ
```bash
# 1. ุงุญุตู ุนูู API key ุฌุฏูุฏ ูู:
# https://console.cloud.google.com/apis/credentials

# 2. ุฃุถู ุงูู key ุงูุฌุฏูุฏ ูู secrets/api_key.txt
# ุงุณุชุจุฏู ุงููุฏูู ุฃู ุงุญุชูุธ ุจุงูุงุซููู (ุงูุธุฑ ุงูุญู 3)
```

### ุงูุญู 3: ูุธุงู Fallback (ูุชุนุฏุฏ ุงูููุงุชูุญ) - ูุฑูุจุงู
ุญุงููุงูุ YouTube API ูุณุชุฎุฏู ููุชุงุญ ูุงุญุฏ ููุท:
- `secrets/api_key.txt` (ููุชุงุญ ูุงุญุฏ)

**ููุชุฑุญ ุชุญุฏูุซ ูุณุชูุจูู**:
- ุฅุถุงูุฉ ุฏุนู `secrets/youtube_api_keys.txt` (ูุซู Gemini)
- Automatic fallback ุนูุฏ ููุงุฏ quota

### ุงูุญู 4: ุงุณุชุฎุฏู `--skip-api-check` (ุบูุฑ ุขูู)
```bash
# ุชุฌุงูุฒ ูุญุต ุงูู API (ูุคูุช ููุท!)
python -m src.presentation.cli.run_pipeline "ุงููุชุงุจ" --skip-api-check
```

**โ๏ธ ุชุญุฐูุฑ**: ูุฏ ุชูุดู ูุฑุญูุฉ ุงูุจุญุซ ูุงุญูุงู!

### ุงูุญู 5: ุฒุฏ ุงูุญุฏ ุงููููู (ูุฏููุน)
```bash
# 1. ุงูุชุญ Google Cloud Console:
https://console.cloud.google.com/apis/api/youtube.googleapis.com/quotas

# 2. ุงุทูุจ ุฒูุงุฏุฉ ุงูู quota (ูุชุทูุจ ููุงููุฉ Google)
# ุงููููุฉ ุงูุงูุชุฑุงุถูุฉ: 10,000/day
# ูููู ุฒูุงุฏุชูุง ุฅูู: 1,000,000/day (ุจุฑุณูู)
```

---

## ๐ง ุญููู ูุคูุชุฉ

### ุงุณุชุฎุฏุงู ููุชุงุญ ุจุฏูู ุญุงููุงู
```bash
# 1. ุงูุชุญ secrets/api_key.txt
notepad secrets\api_key.txt

# 2. ุงุณุชุจุฏู ุงูู API key:
# ูู: AIzaSyABC123... (ููุฐ quota)
# ุฅูู: AIzaSyDEF456... (ุฌุฏูุฏ)

# 3. ุงุญูุธ ุงูููู
```

### ุงูุชุญูู ูู ุงุณุชููุงู ุงูู Quota
```bash
# ุงูุชุญ Google Cloud Console:
https://console.cloud.google.com/apis/api/youtube.googleapis.com/quotas

# ุดุงูุฏ:
# - Queries per day: 9,874 / 10,000
# - ูุชุฌุฏุฏ ูู: Oct 25, 12:00 AM PST
```

---

## ๐ ููู YouTube API Quota

### Costs Table

| ุงูุนูููุฉ | Quota Cost |
|---------|------------|
| Search | 100 units |
| Video details | 1 unit |
| Channel info | 1 unit |
| Upload video | 1,600 units |
| Update video | 50 units |

### ูุซุงู:
```
ูุนุงูุฌุฉ 20 ูุชุงุจ:
- 20 ร ุจุญุซ (100) = 2,000 units
- 20 ร ุชูุงุตูู ููุฏูู (1) = 20 units
- 20 ร ุฑูุน (1,600) = 32,000 units โ ูุชุฌุงูุฒ ุงูุญุฏ!

ุงูุญู: ูุณูู ุนูู ููููู:
- ุงูููู 1: ูุนุงูุฌุฉ 6 ูุชุจ (9,600 units)
- ุงูููู 2: ูุนุงูุฌุฉ 6 ูุชุจ
- ุงูููู 3: ูุนุงูุฌุฉ 8 ูุชุจ
```

---

## ๐ฏ ุฃูุถู ุงูููุงุฑุณุงุช

### 1. ุงุณุชุฎุฏู ุนุฏุฉ API keys (Rotation)
```bash
# ุงุญุตู ุนูู 3-5 ููุงุชูุญ ูู ูุดุงุฑูุน Google Cloud ูุฎุชููุฉ
# ูู ุจุชุฏููุฑูู ููููุงู:
# ุงูููู 1: Key #1
# ุงูููู 2: Key #2
# ุงูููู 3: Key #3
```

### 2. ุฑุงูุจ ุงูุงุณุชููุงู
```bash
# ุดุบู ุงููุญุต ูุจู ูู batch:
python main.py
# Option 0 โ ุดุงูุฏ "YouTube Data API" status
```

### 3. ุฎุทุท ุงููุนุงูุฌุฉ
```bash
# ุจุฏูุงู ูู:
# books.txt: 20 ูุชุงุจ ุฏูุนุฉ ูุงุญุฏุฉ โ

# ุงุณุชุฎุฏู:
# day1.txt: 6 ูุชุจ
# day2.txt: 6 ูุชุจ
# day3.txt: 8 ูุชุจ
```

---

## ๐ฎ ุชุญุฏูุซุงุช ูุณุชูุจููุฉ

ูุนูู ุนูู:
- โ ุฏุนู `youtube_api_keys.txt` (multi-key fallback)
- โ Auto-rotation ุนูุฏ ููุงุฏ quota
- โ Quota usage tracking
- โ ุชุญุฐูุฑุงุช ุงุณุชุจุงููุฉ

---

## ๐ ุงูุฏุนู

ุฅุฐุง ุงุณุชูุฑุช ุงููุดููุฉ:
1. ุชุญูู ูู: https://console.cloud.google.com/apis/api/youtube.googleapis.com/quotas
2. ุดุบู: `python -m src.infrastructure.adapters.api_validator`
3. ุฑุงุฌุน: `docs/API_KEY_FALLBACK.md`

---

**ุขุฎุฑ ุชุญุฏูุซ**: 2025-10-24
